
@tailwind base;
@tailwind components;
@tailwind utilities;

/* V3 Codex Interface - Living Artifact Design System */
/* Philosophy: A portal, not an app. A whisper, not a shout. */

@import url('https://fonts.googleapis.com/css2?family=Crimson+Text:ital,wght@0,400;0,600;1,400;1,600&family=Inter:wght@300;400;500;600&family=Newsreader:ital,wght@0,400;0,500;1,400;1,500&display=swap');

@layer base {
  :root {
    /* V3 Codex Color Scheme - Blue Observatory Palette */
    --background: 16 20 32; /* #101420 Deep observatory blue */
    --foreground: 236 226 220; /* #ECE2DC Soft candlewhite */

    --card: 24 32 48; /* #182030 Deeper blue scroll, like twilight parchment */
    --card-foreground: 236 226 220; /* #ECE2DC Soft candlewhite */

    --popover: 24 32 48; /* #182030 Deeper blue scroll */
    --popover-foreground: 236 226 220; /* #ECE2DC Soft candlewhite */

    /* Input fields - Deeper scroll texture */
    --input: 20 28 42; /* #141C2A Even deeper blue for nested feeling */
    --border: 20 28 42; /* #141C2A Deeper scroll border */

    /* Primary/Interactive - Faint plum (emotional highlight thread) */
    --primary: 141 106 159; /* #8D6A9F Faint plum/mauve */
    --primary-foreground: 236 226 220; /* Soft candlewhite for contrast */

    /* Secondary text - Stone beige */
    --secondary: 20 28 42; /* #141C2A Deeper scroll */
    --secondary-foreground: 182 171 162; /* #B6ABA2 Stone beige */

    --muted: 20 28 42; /* #141C2A Deeper scroll */
    --muted-foreground: 154 142 130; /* #9A8E82 Muted stone */

    /* Accent - Memory glow */
    --accent: 255 214 165; /* #FFD6A5 Memory glow (like match being struck) */
    --accent-foreground: 16 20 32; /* Background for contrast */

    /* Success - Sage wisdom */
    --destructive: 141 106 159; /* #8D6A9F Using plum for gentle success */
    --destructive-foreground: 236 226 220; /* Soft candlewhite */

    --ring: 141 106 159; /* #8D6A9F Faint plum for focus */

    --radius: 0.875rem; /* Slightly more rounded for organic feel */

    /* Sidebar colors matching codex theme */
    --sidebar-background: 12 16 28; /* Slightly darker than main */
    --sidebar-foreground: 236 226 220; /* Soft candlewhite */
    --sidebar-primary: 141 106 159; /* Faint plum */
    --sidebar-primary-foreground: 236 226 220; /* Soft candlewhite */
    --sidebar-accent: 255 214 165; /* Memory glow */
    --sidebar-accent-foreground: 16 20 32; /* Background */
    --sidebar-border: 20 28 42; /* Deeper scroll */
    --sidebar-ring: 141 106 159; /* Faint plum */

    /* Custom codex emotional colors */
    --observatory-blue: 16 20 32; /* #101420 */
    --twilight-scroll: 24 32 48; /* #182030 */
    --deeper-scroll: 20 28 42; /* #141C2A */
    --candlewhite: 236 226 220; /* #ECE2DC */
    --stone-beige: 182 171 162; /* #B6ABA2 */
    --emotional-plum: 141 106 159; /* #8D6A9F */
    --memory-glow: 255 214 165; /* #FFD6A5 */
    --whisper-shadow: 18 24 36; /* #121824 */

    /* Chat text colors - BLACK text on light background */
    --chat-text: 20 20 20; /* #141414 Dark text for chat messages */
    --chat-background: 248 250 252; /* #F8FAFC Light background for chat */
  }

  .light {
    /* Keeping minimal light mode as fallback */
    --background: 250 248 246; /* Parchment white */
    --foreground: 26 24 22; /* Leather journal dark */
    --card: 255 253 251;
    --card-foreground: 26 24 22;
    --popover: 255 253 251;
    --popover-foreground: 26 24 22;
    --primary: 141 106 159;
    --primary-foreground: 250 248 246;
    --secondary: 245 243 241;
    --secondary-foreground: 82 75 69;
    --muted: 245 243 241;
    --muted-foreground: 120 113 108;
    --accent: 238 213 184;
    --accent-foreground: 26 24 22;
    --destructive: 141 106 159;
    --destructive-foreground: 250 248 246;
    --border: 229 225 221;
    --input: 229 225 221;
    --ring: 141 106 159;
    --sidebar-background: 248 246 244;
    --sidebar-foreground: 26 24 22;
    --sidebar-primary: 141 106 159;
    --sidebar-primary-foreground: 250 248 246;
    --sidebar-accent: 238 213 184;
    --sidebar-accent-foreground: 26 24 22;
    --sidebar-border: 229 225 221;
    --sidebar-ring: 141 106 159;
    --chat-text: 20 20 20;
    --chat-background: 248 250 252;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    font-weight: 400;
    line-height: 1.7;
    /* Codex texture - subtle starlight grain */
    background-image: 
      radial-gradient(circle at 1px 1px, rgba(255,214,165,0.03) 1px, transparent 0),
      radial-gradient(circle at 3px 7px, rgba(141,106,159,0.02) 1px, transparent 0);
    background-size: 32px 32px, 48px 48px;
    background-position: 0 0, 16px 24px;
  }

  /* Typography rules */
  h1, h2, h3, h4, h5, h6 {
    font-family: 'Crimson Text', serif;
    font-weight: 600;
    letter-spacing: -0.015em;
    line-height: 1.3;
    color: hsl(var(--candlewhite));
  }

  /* Quotes and memories - soft, weighted, reflective */
  blockquote, .memory-text, .reflection-quote {
    font-family: 'Newsreader', serif;
    font-style: italic;
    font-weight: 400;
    opacity: 0.95;
    color: hsl(var(--stone-beige));
  }

  /* Body text - clean, soulful */
  p, div, span {
    font-family: 'Inter', sans-serif;
  }

  /* Chat message styling - HIGH CONTRAST for legibility */
  .chat-message {
    color: hsl(20 20 20) !important; /* Very dark text */
    background-color: hsl(248 250 252); /* Light background */
  }

  .chat-input {
    color: hsl(20 20 20) !important; /* Very dark text */
    background-color: hsl(248 250 252); /* Light background */
  }

  /* User input areas - typewriter font */
  .user-input, textarea, input[type="text"], .chat-input {
    font-family: 'Courier Prime', 'JetBrains Mono', 'Courier', monospace !important;
    font-weight: 400 !important;
  }

  /* Bot responses - clean sans-serif */
  .bot-message {
    font-family: 'Inter', sans-serif !important;
  }

  /* Fix any yellow text issues - ensure all text has proper contrast */
  .text-yellow-400, .text-yellow-500, .text-yellow-300 {
    color: hsl(var(--foreground)) !important;
  }

  /* Ensure all text is legible */
  * {
    color: inherit;
  }

  /* High contrast overrides for accessibility */
  .bg-white, .bg-white\/10, .bg-white\/20 {
    color: hsl(20 20 20) !important;
  }

  .text-white {
    color: hsl(var(--foreground)) !important;
  }
}

@layer components {
  /* Codex portal transitions */
  .codex-transition {
    @apply transition-all duration-700 ease-out;
  }

  .portal-fade {
    @apply transition-opacity duration-1000 ease-in-out;
  }

  /* Memory glow effects - like striking a match */
  .memory-glow {
    box-shadow: 0 0 24px rgba(255, 214, 165, 0.15);
    @apply transition-shadow duration-500;
  }

  .memory-glow:hover {
    box-shadow: 0 0 36px rgba(255, 214, 165, 0.25);
    transform: translateY(-1px);
  }

  /* Scroll and parchment containers */
  .codex-container {
    background: linear-gradient(135deg, 
      hsl(var(--observatory-blue)) 0%, 
      hsl(var(--twilight-scroll)) 100%);
    position: relative;
    overflow: hidden;
  }

  /* Sacred scroll cards - like unfolding ancient maps */
  .sacred-scroll {
    @apply rounded-xl overflow-hidden;
    background: hsl(var(--twilight-scroll));
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255,214,165,0.08);
    box-shadow: 
      0 8px 32px rgba(0,0,0,0.4),
      inset 0 1px 0 rgba(255,214,165,0.05);
    transition: all 0.6s ease;
    position: relative;
  }

  .sacred-scroll::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, 
      transparent 0%, 
      rgba(141,106,159,0.3) 50%, 
      transparent 100%);
    opacity: 0;
    transition: opacity 0.4s ease;
  }

  .sacred-scroll:hover::before {
    opacity: 1;
  }

  .sacred-scroll:hover {
    transform: translateY(-2px);
    box-shadow: 
      0 12px 48px rgba(0,0,0,0.5),
      inset 0 1px 0 rgba(255,214,165,0.1);
    border-color: rgba(255,214,165,0.15);
  }

  /* Emotional thread tags */
  .thread-marker {
    @apply inline-flex items-center px-3 py-1.5 rounded-full text-xs font-medium;
    background: linear-gradient(135deg, 
      rgba(141,106,159,0.2), 
      rgba(255,214,165,0.1));
    backdrop-filter: blur(6px);
    border: 1px solid rgba(141,106,159,0.2);
    color: hsl(var(--stone-beige));
    transition: all 0.4s ease;
    position: relative;
  }

  .thread-marker:hover {
    transform: translateY(-1px);
    background: linear-gradient(135deg, 
      rgba(141,106,159,0.3), 
      rgba(255,214,165,0.2));
    box-shadow: 0 6px 20px rgba(141,106,159,0.2);
  }

  /* Sealing wax button press effect */
  .wax-seal {
    @apply transition-all duration-300 ease-out;
    transform-origin: center;
    position: relative;
  }

  .wax-seal:hover {
    transform: scale(1.02);
    filter: brightness(1.1);
  }

  .wax-seal:active {
    transform: scale(0.98);
    box-shadow: 
      inset 0 4px 8px rgba(0,0,0,0.3),
      0 0 16px rgba(255,214,165,0.4);
  }

  /* Hero's journey story rhythm */
  .journey-rhythm > * + * {
    margin-top: 2rem;
  }

  /* Whisper interactions - never loud */
  .whisper-hover {
    @apply transition-all duration-500 ease-out;
  }

  .whisper-hover:hover {
    transform: translateY(-1px);
    filter: brightness(1.08);
    text-shadow: 0 0 8px rgba(255,214,165,0.3);
  }

  /* Codex accent colors */
  .accent-emotional-plum { background-color: hsl(var(--emotional-plum)); }
  .accent-memory-glow { background-color: hsl(var(--memory-glow)); }
  .accent-stone-beige { background-color: hsl(var(--stone-beige)); }

  /* Portal glass morphism */
  .portal-glass {
    background: rgba(24, 32, 48, 0.8);
    backdrop-filter: blur(16px);
    border: 1px solid rgba(255, 214, 165, 0.1);
  }

  /* Observatory glow mode */
  .observatory-glow {
    background: rgba(18, 24, 36, 0.9);
    backdrop-filter: blur(12px);
    box-shadow: 
      inset 0 1px 0 rgba(255,214,165,0.05),
      0 0 40px rgba(141,106,159,0.1);
  }

  /* Rune cipher mode for patterns */
  .rune-cipher {
    background: rgba(20, 28, 42, 0.95);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(141,106,159,0.2);
    position: relative;
  }

  .rune-cipher::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(45deg, 
      transparent 48%, 
      rgba(255,214,165,0.03) 50%, 
      transparent 52%);
    pointer-events: none;
  }
}

/* Mystical animations */
@keyframes candle-flicker {
  0%, 100% { opacity: 0.9; filter: brightness(1); }
  25% { opacity: 0.95; filter: brightness(1.05); }
  50% { opacity: 0.85; filter: brightness(0.98); }
  75% { opacity: 0.92; filter: brightness(1.02); }
}

@keyframes memory-surface {
  0%, 100% { transform: translateY(0); opacity: 0.8; }
  50% { transform: translateY(-2px); opacity: 1; }
}

@keyframes rune-glow {
  0%, 100% { 
    box-shadow: 0 0 20px rgba(141,106,159,0.2);
  }
  50% { 
    box-shadow: 0 0 30px rgba(141,106,159,0.4);
  }
}

.candle-flicker {
  animation: candle-flicker 4s ease-in-out infinite;
}

.memory-surface {
  animation: memory-surface 3s ease-in-out infinite;
}

.rune-glow {
  animation: rune-glow 2s ease-in-out infinite;
}

/* Cursor trails in key modes */
.memory-mapping-mode {
  cursor: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><circle cx="12" cy="12" r="3" fill="rgba(255,214,165,0.6)"/></svg>') 12 12, auto;
}

/* Codex Focus States - Gentle, never harsh */
.codex-focus:focus-visible {
  outline: none;
  box-shadow: 
    0 0 0 2px hsl(var(--emotional-plum)), 
    0 0 20px rgba(141,106,159,0.3);
  transform: scale(1.01);
}

/* Codex Text Selection */
::selection {
  background: rgba(255,214,165,0.25);
  color: hsl(var(--candlewhite));
}

/* Codex Scrollbar */
::-webkit-scrollbar {
  width: 8px;
}

::-webkit-scrollbar-track {
  background: hsl(var(--twilight-scroll));
}

::-webkit-scrollbar-thumb {
  background: hsl(var(--stone-beige));
  border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
  background: hsl(var(--emotional-plum));
}

/* Wind-down ritual mode */
.ritual-vignette {
  background: radial-gradient(circle at center, 
    transparent 0%, 
    transparent 60%, 
    rgba(16,20,32,0.3) 80%, 
    rgba(16,20,32,0.6) 100%);
  pointer-events: none;
}
